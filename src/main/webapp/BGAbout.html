<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <title>About</title>

    <!-- <script src="static/menu/jquery.min.js"></script>-->
    <link rel="stylesheet" href="static/menu/menu.css" type="text/css"/>
    <script charset="utf-8" src="static/kindeditor/kindeditor-all-min.js"></script>
    <script charset="utf-8" src="static/kindeditor/zh_CN.js"></script>
    <link rel="stylesheet" href="https://cdn.staticfile.org/twitter-bootstrap/3.3.7/css/bootstrap.min.css">
    <script src="https://cdn.staticfile.org/jquery/2.1.1/jquery.min.js"></script>
    <script src="https://cdn.staticfile.org/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script>

    <style type="text/css">
        * {
            margin: 0;
            padding: 0;
        }

        .headv {
            line-height: 1em;
            color: #4e4e4e;
            min-width: 920px;
            position: fixed;
            top: 0;
            left: 100px;
            right: 0;
            height: 140px;
            z-index: 10;
        }

        .headv > div {
            float: left;
            padding: 20px;
            cursor: pointer;
        }

        .right {
            margin-top: 0%;
            margin-right: -20%;
            text-align: center;
        }

        .fileimg {
            margin: 5px 0;
            font-size: 0px;
            width: 100px;
            height: 40px;
            border-radius: 4px;
            border: 1px solid black; /*https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1545854399678&di=8ba061b9962a9da6bf94c5ab8d582ef1&imgtype=0&src=http%3A%2F%2Fsc01.alicdn.com%2Fkf%2FHTB1N77INpXXXXXXXpXXq6xXFXXXX%2F228377817%2FHTB1N77INpXXXXXXXpXXq6xXFXXXX.jpg*/
            z-index: 12333333;
            background: url("/image/upImag.jpg") no-repeat right center;
            background-size: 40px 40px;
        }

        .imagesnov{
            width: 100%;
            float: left;
        }
        .imgs{
            margin-left: 10px;
            float: left;
            width: 300px;
        }

        .changebtn{
            margin-left: 43%;
        }


    </style>
</head>
<body style="background: black">

<nav class="menu-activea">
    <h1>Menu</h1>
    <ul>
        <li><a href="homePageli.html" style="color:#9DC6D1;text-decoration:none;">HomePage</a></li>
        <li><a href="BGAbout.html" style="color:#9DC6D1;text-decoration:none;">About</a></li>
        <li><a href="BGCommunity.html" style="color:#9DC6D1;text-decoration:none;">Community</a></li>
        <li><a href="BGDay.html" style="color:#9DC6D1;text-decoration:none;">Day</a></li>
        <li><a href="BGSilkRoad.html" style="color:#9DC6D1;text-decoration:none;">SilkRoad</a></li>
        <li><a href="BGInternation.html" style="color:#9DC6D1;text-decoration:none;">Internation</a></li>
        <li><a href="BGBookNow.html" style="color:#9DC6D1;text-decoration:none;">BookNow</a></li>
        <li><a href="user.html" style="color:#9DC6D1;text-decoration:none;">User</a></li>
        <li><a href="book.html" style="color:#9DC6D1;text-decoration:none;">ShowBookNow</a></li>
    </ul>
</nav>
<main>
    <div>
        <ul id="myTab" class="nav nav-tabs" style="padding-left: 10%;">

            <li class="dropdown active">
                <a href="#" id="myTabDrop1" class="dropdown-toggle"
                   data-toggle="dropdown">Molde One
                    <b class="caret"></b>
                </a>
                <ul class="dropdown-menu" role="menu" aria-labelledby="myTabDrop1">
                    <li><a href="#home" tabindex="-1" data-toggle="tab">Modify A Picture</a></li>
                    <li><a href="#onetitle" tabindex="-1" data-toggle="tab">Modify The Title</a></li>
                </ul>
            </li>

            <li class="dropdown">
                <a href="#" id="myTabDrop2" class="dropdown-toggle"
                   data-toggle="dropdown">Molde Two
                    <b class="caret"></b>
                </a>
                <ul class="dropdown-menu" role="menu" aria-labelledby="myTabDrop1">
                    <li><a href="#Mode2Title" tabindex="-1" data-toggle="tab">Modify The Title</a></li>
                    <li><a href="#Mode2Content" tabindex="-1" data-toggle="tab">Modify introduce</a></li>
                </ul>
            </li>


            <li class="dropdown">
                <a href="#" id="myTabDrop3" class="dropdown-toggle"
                   data-toggle="dropdown">Model Three
                    <b class="caret"></b>
                </a>
                <ul class="dropdown-menu" role="menu" aria-labelledby="myTabDrop1">

                    <li><a href="#model3all" tabindex="-1" data-toggle="tab">Modify Multiple Text</a></li>
                </ul>


            </li>

            <!-- 按钮点击四模块-->
            <li class="dropdown">
                <a href="#" id="myTabDrop4" class="dropdown-toggle"
                   data-toggle="dropdown">Model Four
                    <b class="caret"></b>
                </a>
                <ul class="dropdown-menu" role="menu" aria-labelledby="myTabDrop1">
                    <li><a href="#model4TitleOne" tabindex="-1" data-toggle="tab">Modify Multiple Titles </a></li>
                    <li><a href="#model4SubTitleOne" tabindex="-1" data-toggle="tab">Modify Multiple SubTitles </a></li>
                    <li><a href="#model4ContentOne" tabindex="-1" data-toggle="tab">Modify Multiple Text</a></li>
                </ul>
            </li>



        </ul>



        <div id="myTabContent" class="tab-content">

            <div class="tab-pane fade in active" id="home">
                <div id="moduleHead" class="moduleHead" style="width: 100%!important;">
                    <form >
                        <!--TODO  模块一图片上传 -->
                        <div class="row" id="moduleHeadLeft" style="width: 100%!important;">
                            <div class="col-md-8 column right" style="margin-top: 30px">
                                <img height="200px" width="300px" id="moduleHeadLeftImag"/>
                                <div style="margin: 20px 30%;">
                                    <a   href="#"  id="model1updateImage"  style="ztext-decoration:none;" >Modification</a></div>
                            </div>
                            <div class="col-md-4 column">
                                <div style="height: 50px;width: 100%"></div>
                                <span id="choosetitle" style="color:#4e4e4e;text-decoration:none;">please choose Alternate picture:  </span>
                                <input id="fileimg" type="file" class="fileimg"
                                       placeholder="please choose The picture to be replaced"
                                       title="please choose The picture to be replaced">
                            </div>
                        </div>
                    </form>
                </div>
            </div>


            <!--  模块一 标题 显示-->
            <div class="tab-pane fade" id="onetitle">
                <h1 style="text-align: center;text-decoration:none;" id="model1titleone">Modification Main Title</h1>
                <br/><br/><br/><br/>
                <div id="moduleHeadRight" style="z-index: 25252525;padding-left: 26%;">
                    <textarea name="messageContent" style="margin: 0px; height: 120px; width: 400px;" id="model1tit1"
                              placeholder="Please enter the content"></textarea>
                    <a href="javascript:void(0)" id="model1tit1update">Modification</a>
                </div>
            </div>



            <!--  模块二 标题 显示-->
            <div class="tab-pane fade" id="Mode2Title"></a>
                <div style="height: 400px ;width: 500px;margin: 0 28%;">
                    <h4 style="text-align: center" id="showModel2Title">Modify The Title</h4>
                </div>
                <div style="padding-left: 26%;">
                    <textarea name="messageContent" style="margin: 0px; height: 120px; width: 400px;"
                              id="getModel2Titletest"></textarea>
                    <a href="javascript:void(0)" id="updateModel2Title">Modification</a>
                </div>
            </div>
            <!--  模块二 内容 显示-->
            <div class="tab-pane fade" id="Mode2Content">
                <div style="height: 140px ;width: 590px;margin: 0 28%;">
                    <h4 style="text-align: center" id="showModel2Content">Modify Content</h4>
                </div>
                <div style="padding-left: 26%;">
                    <br/><br/><br/><br/>
                    <textarea name="messageContent" style="margin: 0px; height: 120px; width: 400px;"
                              id="getModel2Content"></textarea>
                    <a href="javascript:void(0)" id="updateModel2Content">Modification</a>
                </div>
            </div>

          <!--模块三 部分 -->
            <div class="tab-pane fade" id="model3all"></a>
                <div style="height: 150px ;width: 590px;margin: 2% 28%;">
                    <h4 style="text-align: center" id="showModel3Title1">Modify The Title</h4>
                </div>
                <div style="padding-left: 26%;">
                    <textarea name="messageContent" style="margin: 0px; height: 120px; width: 400px;"
                              id="getModel3Title1"></textarea>
                    <a href="javascript:void(0)" id="updateModel3Title1">Modification</a>
                </div>
            </div>


            <!-- 模块四 修改标题一  -->
            <div class="tab-pane fade" id="model4TitleOne"></a>
                <div style="height: 150px ;width: 590px;margin: 2% 28%;">
                    <h4 style="text-align: center" id="showModel4Title1">Modify The Title</h4>
                </div>
                <div style="padding-left: 26%;">
                    <textarea name="messageContent" style="margin: 0px; height: 120px; width: 400px;"
                              id="getModel4Title1"></textarea>
                    <a href="javascript:void(0)" id="updateModel4Title1">Modification</a>
                </div>
            </div>
            <!-- 模块四 修改副标题一  -->
            <div class="tab-pane fade" id="model4SubTitleOne"></a>
                <div style="height: 150px ;width: 590px;margin: 2% 28%;">
                    <h4 style="text-align: center" id="showModel4SubTitle1">Modify The Title</h4>
                </div>
                <div style="padding-left: 26%;">
                    <textarea name="messageContent" style="margin: 0px; height: 120px; width: 400px;"
                              id="getModel4SubTitle1"></textarea>
                    <a href="javascript:void(0)" id="updateModel4SubTitle1">Modification</a>
                </div>
            </div>
            <!--模块四修改正文一  -->
            <div class="tab-pane fade" id="model4ContentOne"></a>
                <div style="height: 150px ;width: 590px;margin: 2% 28%;">
                    <h4 style="text-align: center" id="showModel4Content1">Modify The Title</h4>
                </div>
                <div style="padding-left: 26%;">
                    <textarea name="messageContent" style="margin: 0px; height: 120px; width: 400px;"
                              id="getModel4Content1"></textarea>
                    <a href="javascript:void(0)" id="updateModel4Content1">Modification</a>
                </div>
            </div>




        </div>
    </div>
</main>


<script src="static/menu/manu.js"></script>

<script type="text/javascript">
    function addimg(dom) {
        var soncommentappend = "";
        soncommentappend += '<div class="imgs">';
        soncommentappend += '<img src="https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1546446128716&di=5f5dce05f80abd5f9e1bd48bfa031c60&imgtype=0&src=http%3A%2F%2Fattach.bbs.miui.com%2Fforum%2F201807%2F17%2F154537ujxutueesyj3mzt0.jpg" style="width: 300px;">';
        soncommentappend += '<br>';
        soncommentappend += '<button class="btn btn-default changebtn">修改</button>';
        soncommentappend += '<button class="btn btn-default">删除</button>';
        soncommentappend += '<button class="btn btn-default" onclick="addimg(this)">添加</button>';
        soncommentappend += '</div>';
        $(dom).parent().parent().append(soncommentappend);
    }
</script>

<script type="text/javascript">
    function updates(dom) {
        if (dom.id == "up1") {
            alert("asd");
        } else {
            alert("asd");
        }
    }
</script>

<script type="text/javascript">

    $(document).ready(function () {

        $.ajax({
            type: "POST",
            url: '/backabout/query',
            dataType: 'json',
            cache: false,
            success: function (date) {
                if (date.success == true) {
                    var one = date.data.one;
                    $("#moduleHeadLeftImag").attr("src", one.image);
                    $("#model1titleone").html(one.title);
                    var two = date.data.two;
                    $("#showModel2Title").html(two.title);
                    $("#showModel2Content").html(two.introduce);
                    var three = date.data.three;

                    var four = date.data.four;
                    $("#showModel4Title1").html(four.title);
                    $("#showModel4SubTitle1").html(four.subtitle);
                    $("#showModel4Content1").html(four.introduce);
                   /*  alert(four.subtitle);*/


                } else if (date.success == false) {
                    var err = date.errCode;
                    if (err == 0000001) {
                        alert("Please login first");
                    }
                }

            },
            error: function () {
                alert("network anomaly");
            }
        });


        //简单模式初始化
        var editor;
        KindEditor.ready(function (K) {
            editor = K.create('textarea[name="messageContent"]', {
//            resizeType : 1,
//            allowPreviewEmoticons : false,
                allowFileManager: true,
                items: [
                    'fontsize', '|', 'forecolor', 'hilitecolor', 'bold', 'italic', 'underline',
                    'removeformat', '|', 'justifyleft', 'justifycenter', 'justifyright', 'insertorderedlist',
                    'insertunorderedlist', '|', 'lineheight', 'emoticons', 'media', 'link', 'code', 'source',
                    'fullscreen'],
                uploadJson: '/static/js/kindeditor/kd_upload_image.jsp',
//      allowFileManager : true,
//      fileManagerJson : '/static/js/kindeditor/kd_upload_file.jsp'
                afterCreate: function () {
                    this.sync();
                },
                afterBlur: function () {
                    this.sync();
                }

            });


        });
    });


    $(document).ready(function () {

        //模块一图片修改
        $("#model1updateImage").on('click', function () {

            var img = $("#fileimg").val();
            if (img == '' || img == null) {
                alert("Please select file");
                return false;
            }
            var file = new FormData();
            file.append("file", document.getElementById('fileimg').files[0]);
            upImage("/backabout/editItemsSubmit", file);
        });


        //模块一主标题修改
        $("#model1tit1update").click(function () {

            var msg = $("#model1tit1").val();
            if (msg == '' || msg == null) {
                alert("Please enter the content");
                return false;
            }

               update("/backabout/mode1Update", msg, 1);
            return false;
        });


        //模块一内容
        $("#updateModel1MainBody").click(function () {

            var msg = $("#getModel1MainBody").val();
            if (msg == '' || msg == null) {
                alert("Please enter the content");
                return false;
            }
            update("/backabout/mode1Update", msg, 3);
            return false;
        });


        //模块二标题
        $("#updateModel2Title").click(function () {
            var msg = $("#getModel2Titletest").val();
            if (msg == '' || msg == null) {
                alert("Please enter the content");
                return false;
            }
            update("/backabout/model2Update", msg, 1);
            return false;
        });

        //模块二内容
        $("#updateModel2Content").click(function () {
            var msg = $("#getModel2Content").val();

            if (msg == '' || msg == null) {
                alert("Please enter the content");
                return false;
            }
            update("/backabout/model2Update", msg, 2);
            return false;
        });



        /*模块四 标题一 修改  */
        $("#updateModel4Title1").click(function () {
            var msg = $("#getModel4Title1").val();
            if (msg == '' || msg == null) {
                alert("Please enter the content");
                return false;
            }
            updatemodel4("/backabout/model4Update", msg, 1,1);
            return false;
        });
        /*模块四 副标题一 修改  */
        $("#updateModel4SubTitle1").click(function () {
            var msg = $("#getModel4SubTitle1").val();
            if (msg == '' || msg == null) {
                alert("Please enter the content");
                return false;
            }
            updatemodel4("/backabout/model4Update", msg, 2,1);
            return false;
        });
        /*模块四 内容一 修改  */
        $("#updateModel4Content1").click(function () {
            var msg = $("#getModel4Content1").val();
            if (msg == '' || msg == null) {
                alert("Please enter the content");
                return false;
            }
            updatemodel4("/backabout/model4Update", msg, 3,1);
            return false;
        });







    });







    function update(url, msg, falg) {
        $.ajax({
            type: "POST",
            url: url,
            dataType: 'json',
            data: {"msg": msg, falg: falg},
            cache: false,
            success: function (date) {
                if (date.success == true) {
                    history.go(0);
                } else if (date.success == false) {
                    var err = date.errCode;
                    if (err == 0000001) {
                        alert("Please login first");
                    }
                }
            },
            error: function () {
                alert("network anomaly");
            }
        });

    }






    //模块四 标题 副标题 和内容修改的通用方法
    function updatemodel4(url, msg, falg,id) {
        $.ajax({
            type: "POST",
            url: url,
            dataType: 'json',
            data: {"msg": msg, falg: falg, id:id},
            cache: false,
            success: function (date) {
                if (date.success == true) {
                    history.go(0);
                } else if (date.success == false) {
                    var err = date.errCode;
                    if (err == 0000001) {
                        alert("Please login first");
                    }
                }
            },
            error: function () {
                alert("network anomaly");
            }
        });

    }

    //上传图片
    function upImage(url,data) {

        $.ajax({
            url: url,
            type: 'POST',
            data: data,
            dataType: 'JSON',
            async: false,
            processData: false,
            contentType: false,
            success: function (date) {
                if (date.success == true) {
                    history.go(0);
                } else if (date.success == false) {
                    alert("Failed to upload picture! Please select the picture correctly!");
                }
            },
            error: function () {
                alert("network anomaly");
            }

        });

    }



</script>


</body>
</html>