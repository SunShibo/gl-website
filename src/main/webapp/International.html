<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>INTERNATIONAL</title>
    <script src="js/loadcss.js" type="text/javascript" charset="utf-8"></script>
</head>
<body>
<div id="main">
    <div id="banner">
        <div id="head">
            <div class="b-logo">
                <img id="logo" src="image/logo-dark.png" alt="">
            </div>
            <ul class="nav justify-content-end">
                <li class="nav-item">
                    <a class="nav-link active" href="#">HOME</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#">LTINERAR</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#">BOOK NOW</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#">ABOUT US</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#">CONTACT US</a>
                </li>
            </ul>
        </div>
        <img id="bannerImg" alt="" width="100%" height="100%">
        <div class="banner-title">
            <div><h2 id="title"></h2></div>
        </div>
    </div>
    <div class="grid" id="grid">

    </div>
    <div id="foot">
        <div class="f-center">
            <div class="f-logo"><img src="image/logo-dark.png" alt="" width="100%" height="100%"></div>
            <div class="f-content">© 2018 Rediscover Culture</div>
        </div>
    </div>
</div>
<script src="js/loadjs.js" type="text/javascript" charset="utf-8"></script>
<script src="js/gridify-min.js" type="text/javascript" charset="utf-8"></script>
<script>
    $(function () {

        $.ajax({
            url: '/internation/query',
            type: 'POST',
            dataType: 'json',
            success: function (rs) {
                setDom(rs.data);
            }
        })
    })

    function setDom(data) {
        console.log(data);
        $('#title').text(data.one.title);
        $('#banner').css('background', "url(" + data.homeModel1.image + ") no-repeat center center");
        for (var i = 0, len = data.two.length; i < len; i++) {
            var img = '<img src="' + data.two[i].image + '">'
            $('#grid').append(img);
        }
        var options = {
            srcNode: 'img',             // grid items (class, node)
            margin: '0px',             // margin in pixel, default: 0px
            width: '220px',             // grid item width in pixel, default: 220px
            max_width: '400px',              // dynamic gird item width if specified, (pixel)
            resizable: true,            // re-layout if window resize
            transition: 'all 0.5s ease' // support transition for CSS3, default: all 0.5s ease
        };
        $('.grid').gridify(options);
        //计算高度
        var l1 = 0, l2 = 0, l3 = 0, l4 = 0;
        var item = $('#grid img');
        setTimeout(function () {
            var length = 0, length1 = $(item[0]).data('left'), length2 = $(item[1]).data('left'),
                length3 = $(item[2]).data('left'), length4 = $(item[3]).data('left');
            for (var i = 0, len = item.length; i < len; i++) {
                if ($(item[i]).data('left') == length1) {
                    l1 += $(item[i]).height();
                } else if ($(item[i]).data('left') == length2) {
                    l2 += $(item[i]).height();
                } else if ($(item[i]).data('left') == length3) {
                    l3 += $(item[i]).height();
                } else if ($(item[i]).data('left') == length4) {
                    l4 += $(item[i]).height();
                }
            }
            length = l1 > l2 ? l1 : l2;
            length = length > l3 ? length : l3;
            length = length > l4 ? length : l4;
            $('#foot').css('marginTop', (length) + "px")
        }, 200);
    }
</script>
</body>
</html>